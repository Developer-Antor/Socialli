{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/home/abrar/Documents/React-Project/InstagramFirebase/Instagram/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Button}from\"@material-ui/core\";import React,{useState}from\"react\";import{db,storage}from\"../Firebase/firebase\";import firebase from\"firebase\";import\"./ImageUpload.css\";function ImageUpload(_ref){var username=_ref.username;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),caption=_useState2[0],setCaption=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),image=_useState4[0],setImage=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),progress=_useState6[0],setProgress=_useState6[1];var handleChange=function handleChange(e){if(e.target.files[0]){setImage(e.target.files[0]);}};var handleUpload=function handleUpload(){var uploadTask=storage.ref(\"images/\".concat(image.name)).put(image);uploadTask.on(\"state_changed\",function(snapshot){var progress=snapshot.bytesTransferred/snapshot.totalBytes*100;setProgress(progress);},function(error){console.log(error);alert(error.message);},function(){storage.ref(\"images\").child(image.name).getDownloadURL().then(function(url){db.collection(\"posts\").add({timestamp:firebase.firestore.FieldValue.serverTimestamp(),caption:caption,imageUrl:url,username:username});});setProgress(0);setCaption(\"\");setImage(null);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"img-upload\",children:[/*#__PURE__*/_jsx(\"progress\",{value:progress,max:\"100\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter A Caption\",onChange:function onChange(e){return setCaption(e.target.value);},value:caption}),/*#__PURE__*/_jsx(\"input\",{id:\"file\",type:\"file\",onChange:handleChange}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-container\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"file\",children:\"Choose Image\"}),/*#__PURE__*/_jsx(Button,{className:\"button\",onClick:handleUpload,children:\"Upload!\"})]})]});}export default ImageUpload;","map":{"version":3,"sources":["/home/abrar/Documents/React-Project/InstagramFirebase/Instagram/src/Components/ImageUpload.js"],"names":["Button","React","useState","db","storage","firebase","ImageUpload","username","caption","setCaption","image","setImage","progress","setProgress","handleChange","e","target","files","handleUpload","uploadTask","ref","name","put","on","snapshot","bytesTransferred","totalBytes","error","console","log","alert","message","child","getDownloadURL","then","url","collection","add","timestamp","firestore","FieldValue","serverTimestamp","imageUrl","value"],"mappings":"8QAAA,OAASA,MAAT,KAAuB,mBAAvB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,EAAT,CAAaC,OAAb,KAA4B,sBAA5B,CACA,MAAOC,CAAAA,QAAP,KAAqB,UAArB,CACA,MAAO,mBAAP,CACA,QAASC,CAAAA,WAAT,MAAmC,IAAZC,CAAAA,QAAY,MAAZA,QAAY,eACHL,QAAQ,CAAC,EAAD,CADL,wCAC1BM,OAD0B,eACjBC,UADiB,8BAEPP,QAAQ,CAAC,IAAD,CAFD,yCAE1BQ,KAF0B,eAEnBC,QAFmB,8BAGDT,QAAQ,CAAC,CAAD,CAHP,yCAG1BU,QAH0B,eAGhBC,WAHgB,eAKjC,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,CAAD,CAAO,CAC1B,GAAIA,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAAJ,CAAuB,CACrBN,QAAQ,CAACI,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAAD,CAAR,CACD,CACF,CAJD,CAMA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzB,GAAMC,CAAAA,UAAU,CAAGf,OAAO,CAACgB,GAAR,kBAAsBV,KAAK,CAACW,IAA5B,GAAoCC,GAApC,CAAwCZ,KAAxC,CAAnB,CACAS,UAAU,CAACI,EAAX,CACE,eADF,CAEE,SAACC,QAAD,CAAc,CACZ,GAAMZ,CAAAA,QAAQ,CACXY,QAAQ,CAACC,gBAAT,CAA4BD,QAAQ,CAACE,UAAtC,CAAoD,GADtD,CAGAb,WAAW,CAACD,QAAD,CAAX,CACD,CAPH,CAQE,SAACe,KAAD,CAAW,CACTC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACAG,KAAK,CAACH,KAAK,CAACI,OAAP,CAAL,CACD,CAXH,CAYE,UAAM,CACJ3B,OAAO,CACJgB,GADH,CACO,QADP,EAEGY,KAFH,CAEStB,KAAK,CAACW,IAFf,EAGGY,cAHH,GAIGC,IAJH,CAIQ,SAACC,GAAD,CAAS,CACbhC,EAAE,CAACiC,UAAH,CAAc,OAAd,EAAuBC,GAAvB,CAA2B,CACzBC,SAAS,CAAEjC,QAAQ,CAACkC,SAAT,CAAmBC,UAAnB,CAA8BC,eAA9B,EADc,CAEzBjC,OAAO,CAAEA,OAFgB,CAGzBkC,QAAQ,CAAEP,GAHe,CAIzB5B,QAAQ,CAAEA,QAJe,CAA3B,EAMD,CAXH,EAYAM,WAAW,CAAC,CAAD,CAAX,CACAJ,UAAU,CAAC,EAAD,CAAV,CACAE,QAAQ,CAAC,IAAD,CAAR,CACD,CA5BH,EA8BD,CAhCD,CAkCA,mBACE,aAAK,SAAS,CAAC,YAAf,wBACE,iBAAU,KAAK,CAAEC,QAAjB,CAA2B,GAAG,CAAC,KAA/B,EADF,cAEE,cACE,IAAI,CAAC,MADP,CAEE,WAAW,CAAC,iBAFd,CAGE,QAAQ,CAAE,kBAACG,CAAD,QAAON,CAAAA,UAAU,CAACM,CAAC,CAACC,MAAF,CAAS2B,KAAV,CAAjB,EAHZ,CAIE,KAAK,CAAEnC,OAJT,EAFF,cAQE,cAAO,EAAE,CAAC,MAAV,CAAiB,IAAI,CAAC,MAAtB,CAA6B,QAAQ,CAAEM,YAAvC,EARF,cASE,aAAK,SAAS,CAAC,kBAAf,wBACE,cAAO,OAAO,CAAC,MAAf,0BADF,cAEE,KAAC,MAAD,EAAQ,SAAS,CAAC,QAAlB,CAA2B,OAAO,CAAEI,YAApC,qBAFF,GATF,GADF,CAkBD,CAED,cAAeZ,CAAAA,WAAf","sourcesContent":["import { Button } from \"@material-ui/core\";\nimport React, { useState } from \"react\";\nimport { db, storage } from \"../Firebase/firebase\";\nimport firebase from \"firebase\";\nimport \"./ImageUpload.css\";\nfunction ImageUpload({ username }) {\n  const [caption, setCaption] = useState(\"\");\n  const [image, setImage] = useState(null);\n  const [progress, setProgress] = useState(0);\n\n  const handleChange = (e) => {\n    if (e.target.files[0]) {\n      setImage(e.target.files[0]);\n    }\n  };\n\n  const handleUpload = () => {\n    const uploadTask = storage.ref(`images/${image.name}`).put(image);\n    uploadTask.on(\n      \"state_changed\",\n      (snapshot) => {\n        const progress =\n          (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n\n        setProgress(progress);\n      },\n      (error) => {\n        console.log(error);\n        alert(error.message);\n      },\n      () => {\n        storage\n          .ref(\"images\")\n          .child(image.name)\n          .getDownloadURL()\n          .then((url) => {\n            db.collection(\"posts\").add({\n              timestamp: firebase.firestore.FieldValue.serverTimestamp(),\n              caption: caption,\n              imageUrl: url,\n              username: username,\n            });\n          });\n        setProgress(0);\n        setCaption(\"\");\n        setImage(null);\n      }\n    );\n  };\n\n  return (\n    <div className=\"img-upload\">\n      <progress value={progress} max=\"100\" />\n      <input\n        type=\"text\"\n        placeholder=\"Enter A Caption\"\n        onChange={(e) => setCaption(e.target.value)}\n        value={caption}\n      />\n      <input id=\"file\" type=\"file\" onChange={handleChange} />\n      <div className=\"button-container\">\n        <label htmlFor=\"file\">Choose Image</label>\n        <Button className=\"button\" onClick={handleUpload}>\n          Upload!\n        </Button>\n      </div>\n    </div>\n  );\n}\n\nexport default ImageUpload;\n"]},"metadata":{},"sourceType":"module"}