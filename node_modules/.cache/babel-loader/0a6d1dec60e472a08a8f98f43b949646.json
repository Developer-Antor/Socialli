{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/home/abrar/Documents/React-Project/InstagramFirebase/Instagram/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Avatar}from\"@material-ui/core\";import MyAvatar from\"../Assets/avatar.png\";import React,{useState,useEffect}from\"react\";import\"./Post.css\";import{db}from\"../Firebase/firebase\";import firebase from\"firebase\";function Post(_ref){var user=_ref.user,username=_ref.username,caption=_ref.caption,imageUrl=_ref.imageUrl,postId=_ref.postId;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),comments=_useState2[0],setComments=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),comment=_useState4[0],setComment=_useState4[1];var postComment=function postComment(e){e.preventDefault();db.collection(\"posts\").doc(postId).collection(\"comments\").add({timestamp:firebase.firestore.FieldValue.serverTimestamp(),username:user.displayName,text:comment});setComment(\"\");};useEffect(function(){var unsubscribe;if(postId){unsubscribe=db.collection(\"posts\").doc(postId).collection(\"comments\").orderBy(\"timestamp\",\"desc\").onSnapshot(function(snapshot){setComments(snapshot.docs.map(function(doc){return doc.data();}));});}return function(){unsubscribe();};},[postId]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"post-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"post\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"post-header\",children:[/*#__PURE__*/_jsx(Avatar,{className:\"post-avatar\",alt:\"username\",src:MyAvatar}),/*#__PURE__*/_jsx(\"h3\",{children:username})]}),/*#__PURE__*/_jsx(\"img\",{className:\"post-image\",src:imageUrl,alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"post-caption\",children:[/*#__PURE__*/_jsx(\"b\",{children:username}),\" \",caption]}),/*#__PURE__*/_jsx(\"div\",{className:\"comment-container\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"comments\",children:comments.map(function(comment){return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"b\",{children:comment.username}),\" \",comment.text]});})})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:postComment,className:\"post-comment\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setComment(e.target.value);},placeholder:\"Post A Commment\",type:\"text\",value:comment}),/*#__PURE__*/_jsx(\"button\",{disabled:!comment,type:\"submit\",children:\"Post\"})]})]})})});}export default Post;","map":{"version":3,"sources":["/home/abrar/Documents/React-Project/InstagramFirebase/Instagram/src/Components/Post.js"],"names":["Avatar","MyAvatar","React","useState","useEffect","db","firebase","Post","user","username","caption","imageUrl","postId","comments","setComments","comment","setComment","postComment","e","preventDefault","collection","doc","add","timestamp","firestore","FieldValue","serverTimestamp","displayName","text","unsubscribe","orderBy","onSnapshot","snapshot","docs","map","data","target","value"],"mappings":"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","sourcesContent":["import { Avatar } from \"@material-ui/core\";\nimport MyAvatar from \"../Assets/avatar.png\";\nimport React, { useState, useEffect } from \"react\";\nimport \"./Post.css\";\nimport { db } from \"../Firebase/firebase\";\nimport firebase from \"firebase\";\n\nfunction Post({ user, username, caption, imageUrl, postId }) {\n  const [comments, setComments] = useState([]);\n  const [comment, setComment] = useState(null);\n  const postComment = (e) => {\n    e.preventDefault();\n    db.collection(\"posts\").doc(postId).collection(\"comments\").add({\n      timestamp: firebase.firestore.FieldValue.serverTimestamp(),\n      username: user.displayName,\n      text: comment,\n    });\n    setComment(\"\");\n  };\n  useEffect(() => {\n    let unsubscribe;\n    if (postId) {\n      unsubscribe = db\n        .collection(\"posts\")\n        .doc(postId)\n        .collection(\"comments\")\n        .orderBy(\"timestamp\", \"desc\")\n        .onSnapshot((snapshot) => {\n          setComments(snapshot.docs.map((doc) => doc.data()));\n        });\n    }\n    return () => {\n      unsubscribe();\n    };\n  }, [postId]);\n\n  return (\n    <div>\n      <div className=\"post-container\">\n        <div className=\"post\">\n          <div className=\"post-header\">\n            <Avatar\n              className=\"post-avatar\"\n              alt=\"username\"\n              src={MyAvatar}\n            ></Avatar>\n            <h3>{username}</h3>\n          </div>\n          <img className=\"post-image\" src={imageUrl} alt=\"\" />\n          <div className=\"post-caption\">\n            <b>{username}</b> {caption}\n          </div>\n          <div className=\"comment-container\">\n            <ul className=\"comments\">\n              {comments.map((comment) => {\n                return (\n                  <li>\n                    <b>{comment.username}</b> {comment.text}\n                  </li>\n                );\n              })}\n            </ul>\n          </div>\n          <form onSubmit={postComment} className=\"post-comment\">\n            <input\n              onChange={(e) => setComment(e.target.value)}\n              placeholder=\"Post A Commment\"\n              type=\"text\"\n              value={comment}\n            />\n            <button disabled={!comment} type=\"submit\">\n              Post\n            </button>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Post;\n"]},"metadata":{},"sourceType":"module"}